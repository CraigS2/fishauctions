{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load el_pagination_tags %}
{% load thumbnail %}
{% block title %}
{% if view == "all" %}
Lots
{% endif %}
{% if view == "watch" %}
Watched items
{% endif %}
{% if view == "mybids" %}
Bids
{% endif %}
{% if view == "mylots" %}
Your lots
{% endif %}
{% if view == "mywonlots" %}
Won lots
{% endif %}
{% if view == "user" %}
User: {{ user }}
{% endif %}
{% endblock %}
{% load static %}
{% block content %}

<div class="container mt-5 mb-5">
    <div class="row">
      <div class="col-md-10 offset-lg-1">
        <h1>{% if view == "all" %}
          Lots
          {% endif %}
          {% if view == "watch" %}
          Watched lots
          {% endif %}
          {% if view == "mybids" %}
          Bids
          {% endif %}
          {% if view == "mylots" %}
          Your lots
          {% endif %}
          {% if view == "user" %}
          All lots created by {{ user }}
          {% endif %}
          {% if view == "mywonlots" %}
          Lots you've won
          {% endif %}{% if auction %} for {{ auction }}{% endif %}</h1>
        <form method="GET">
          {{ filter.form }}
          <button type="submit" class="btn btn-primary">Apply Filter</button> {% if view == "mylots" or view == "all" %}<br>{% if auction %}{% if auction.can_submit_lots %}<a href="/lots/new/" class="btn btn-info" role="button">Create lot</a>{% endif %}{% endif %}{% endif %}
        </form>
        {% if view == "user" %}
        <br><a href='/users/{{user.pk}}'>View user info for {{ user }} </a><br>
        {% endif %}
        {% if lotsAreHidden >= 0 %}<span class="text-muted">{{lotsAreHidden}} categories are <a href='/ignore/'>ignored</a></span>{% endif %}
        
    </div>
</div>
</div>  
{% include page_template %}
{% endblock %}

{% block extra_js %}
    {{ block.super }}
    <script src="/static/js/el-pagination.js"></script>
    <script>$.endlessPaginate({
      paginateOnScroll: true,
      paginateOnScrollMargin: 100
      });</script>
{% endblock %}
